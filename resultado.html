<!-- resultado.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resultado da Seleção - AHP</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container py-5">
    <h2 class="text-center mb-4">Resultado da Seleção</h2>
    <div id="resultadoTexto" class="mb-4 text-center"></div>
    <canvas id="graficoResultado" height="120"></canvas>
    <div id="consistencia" class="text-center mt-4"></div>
  </div>

  <script src="ahp.js"></script>
  <script src="dados.js"></script>
  <script>
    const resultado = calcularResultadoFinal();
    const alunos = resultado.alunos;
    const pesos = resultado.pesos;
    const cr = resultado.cr;

    // Mostra melhor aluno
    const melhorIndex = pesos.indexOf(Math.max(...pesos));
    const melhorAluno = alunos[melhorIndex];
    const resultadoTexto = document.getElementById("resultadoTexto");
    resultadoTexto.innerHTML = `<h4>Aluno mais indicado: <strong>${melhorAluno}</strong></h4>`;

    // Gráfico
    const ctx = document.getElementById("graficoResultado").getContext("2d");
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: alunos,
        datasets: [{
          label: 'Prioridade',
          data: pesos.map(p => p.toFixed(4)),
          backgroundColor: '#0d6efd'
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            max: 1
          }
        }
      }
    });

    // Consistência
    const divCons = document.getElementById("consistencia");
    if (cr < 0.1) {
      divCons.innerHTML = `<p class="text-success">Consistência aceitável (CR = ${cr.toFixed(4)})</p>`;
    } else {
      divCons.innerHTML = `<p class="text-danger">Atenção: inconsistência elevada (CR = ${cr.toFixed(4)})</p>`;
    }
  </script>
</body>
</html>
